<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Heart Failure Risk Predictor</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: {
              light: '#6366f1', // indigo-500
              DEFAULT: '#4f46e5', // indigo-600
              dark: '#4338ca' // indigo-700
            },
            dangerLight: '#fee2e2', // red-200
            dangerDark: '#fca5a5', // red-300
            warningLight: '#fef3c7', // yellow-200
            warningDark: '#fde68a' // yellow-300
          },
          fontFamily: {
            sans: ['"Inter"', 'ui-sans-serif', 'system-ui']
          }
        }
      }
    };
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
</head>
<body class="bg-gradient-to-tr from-blue-100 to-indigo-100 dark:from-gray-900 dark:to-gray-800 text-gray-800 dark:text-gray-200 font-sans transition-colors duration-500">

  <!-- Theme Toggle Button -->
  <div class="fixed top-6 right-6 z-50">
    <button
      aria-label="Toggle Dark Mode"
      onclick="toggleTheme()"
      class="flex items-center gap-2 bg-primary DEFAULT hover:bg-primary dark:hover:bg-primary-dark transition-colors duration-300 text-white px-5 py-3 rounded-xl shadow-lg focus:outline-none focus:ring-4 focus:ring-primary-light"
      type="button"
    >
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v1m0 16v1m8.66-11H21m-18 0h1.34m12.02 6.78l.95.95m-14.6 0l.95-.95M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
      </svg>
      Toggle Theme
    </button>
  </div>

  <!-- Main container -->
  <main class="max-w-4xl mx-auto p-8 sm:p-12 bg-white dark:bg-gray-800 rounded-3xl shadow-2xl ring-1 ring-indigo-200 dark:ring-indigo-700">
    <header class="mb-10 text-center">
      <h1 class="text-5xl font-extrabold text-primary DEFAULT dark:text-primary-light mb-2 select-none tracking-tight">
        Heart Failure Risk Predictor
      </h1>
      <p class="text-lg text-gray-600 dark:text-gray-400 max-w-xl mx-auto">
        Enter the patient’s clinical details below to estimate the risk of heart failure accurately.
      </p>
    </header>

    <form method="POST" action="/predict" class="grid grid-cols-1 md:grid-cols-2 gap-8">

      {% set bool_fields = ['anaemia', 'diabetes', 'high_blood_pressure', 'smoking'] %}
      {% set fields = [
        ('age', 'Age (in years)', 'Patient’s age in years'),
        ('anaemia', 'Anaemia', 'Reduced red blood cells or hemoglobin'),
        ('creatinine_phosphokinase', 'Creatinine Phosphokinase (mcg/L)', 'CPK enzyme level in blood'),
        ('diabetes', 'Diabetes', 'Whether the patient has diabetes'),
        ('ejection_fraction', 'Ejection Fraction (%)', 'Percentage of blood leaving the heart at each contraction'),
        ('high_blood_pressure', 'High Blood Pressure', 'History of hypertension'),
        ('platelets', 'Platelets (kiloplatelets/mL)', 'Platelet count in blood'),
        ('serum_creatinine', 'Serum Creatinine (mg/dL)', 'Level of creatinine in the blood'),
        ('serum_sodium', 'Serum Sodium (mEq/L)', 'Sodium concentration in blood'),
        ('smoking', 'Smoking', 'Whether the patient smokes')
      ] %}

      {% for field, label, help in fields %}
      <div class="flex flex-col">
        <label for="{{ field }}" class="mb-2 font-semibold text-gray-900 dark:text-gray-100 cursor-pointer select-none">{{ label }}</label>

        {% if field in bool_fields %}
          <select id="{{ field }}" name="{{ field }}" required
            class="appearance-none bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary DEFAULT text-gray-900 dark:text-gray-100 transition duration-300">
            <option value="" disabled selected>Select</option>
            <option value="No">No</option>
            <option value="Yes">Yes</option>
          </select>
        {% else %}
          <input
            type="number" step="any" id="{{ field }}" name="{{ field }}" required
            placeholder="{{ help }}"
            class="bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg px-4 py-3 text-gray-900 dark:text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary DEFAULT transition duration-300"
          />
        {% endif %}

        <small class="mt-1 text-gray-500 dark:text-gray-400 italic">{{ help }}</small>
      </div>
      {% endfor %}

      <!-- Sex Dropdown -->
      <div class="flex flex-col">
        <label for="sex" class="mb-2 font-semibold text-gray-900 dark:text-gray-100 cursor-pointer select-none">Sex</label>
        <select id="sex" name="sex" required
          class="appearance-none bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary DEFAULT text-gray-900 dark:text-gray-100 transition duration-300">
          <option value="" disabled selected>Select sex</option>
          <option value="Female">Female</option>
          <option value="Male">Male</option>
        </select>
        <small class="mt-1 text-gray-500 dark:text-gray-400 italic">Biological sex of the patient</small>
      </div>

      <!-- Submit Button -->
      <div class="md:col-span-2">
        <button
          type="submit"
          class="w-full py-4 mt-6 bg-primary DEFAULT hover:bg-primary-dark text-white font-extrabold text-xl rounded-2xl shadow-lg transition-all duration-300 focus:outline-none focus
